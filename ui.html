<h2>Export Settings</h2>

<label for="convention">File name format:</label>
<select id="convention"></select>

<button id="export">Export</button>

<script>
  window.onload = (event) => {
    parent.postMessage({ pluginMessage: { type: 'load' } }, '*');
  }

  document.getElementById('export').onclick = (_event) => {
    const selector = document.getElementById('convention');
    const convention = selector.options[selector.selectedIndex].value;
    console.log(convention);
    parent.postMessage({ pluginMessage: { type: 'export', value: convention } }, '*');
  }

  onmessage = (event) => {
    const msg = event.data.pluginMessage;

    if (msg.type === 'load') {
      let selector = document.getElementById('convention');
      const conventions = msg.value;

      conventions.forEach(convention => {
        const option = document.createElement('option');
        option.text = convention;
        option.value = convention;
        selector.appendChild(option);
      });
    }
  }
</script>
